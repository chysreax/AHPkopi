<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHP Analysis: Specialized Coffee Offering</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #3E2723; /* Darkest Brown */
            color: #F5F5F5; /* Off-White */
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: #4A0072; /* Dark Deep Purple */
            color: #FFFFFF; /* White */
            padding: 25px 0;
            text-align: center;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3); /* Subtle purple glow */
        }

        header h1 {
            margin: 0;
            font-size: 2.8em;
            font-weight: 600;
        }

        h2 {
            color: #BA68C8; /* Medium Purple */
            border-bottom: 2px solid #7E57C2; /* Deeper Purple */
            padding-bottom: 10px;
            margin-top: 40px;
            font-size: 2em;
        }

        h3 {
            color: #D1C4E9; /* Lighter Purple */
            margin-top: 30px;
            font-size: 1.4em;
        }

        .content-section {
            background-color: #5D4037; /* Dark Brown - lighter than body */
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .content-section ul {
            list-style-type: disc;
            padding-left: 25px;
        }

        .content-section li {
            margin-bottom: 12px;
            font-size: 1.05em;
        }
        .content-section p {
            font-size: 1.05em;
            margin-bottom: 15px;
        }

        .content-section {
            background-color: #FFFFFF;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }


        #ahpGraph {
            width: 100%;
            /* height: 700px; /* Adjust as needed */
            border-radius: 15px;
            background-color: #FFFFFF;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .code-like {
            font-family: 'Courier New', Courier, monospace;
            background-color: #EFEBE9; /* Lightest brown */
            padding: 2px 5px;
            border-radius: 4px;
            color: #3E2723; /* Darkest brown */
        }

        strong {
            color: #4A148C; /* Dark Purple for emphasis */
        }

        /* Custom scrollbar for a bit more theme consistency - WebKit browsers */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #E1BEE7; /* Light Purple/Lavender */
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #7B1FA2; /* Medium Purple */
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4A148C; /* Dark Purple */
        }

    </style>
</head>
<body>
    <header>
        <h1>AHP Analysis: Selecting a Specialized Coffee Offering</h1>
    </header>

    <div class="container">
        <div class="content-section">
            <h2>Understanding Your Initial Coffee Diagram & AHP Revision</h2>
            <p>Your initial diagram was an excellent mind map showing various elements related to specialized coffee, including brewing methods, bean origins, and processing techniques. It effectively illustrated the relationships and categories within this domain.</p>
            <p>However, to frame it as a formal Analytical Hierarchy Process (AHP), some restructuring is beneficial. Here's a breakdown of the observations and the revisions made to create a more typical AHP decision-making model:</p>

            <h3>Comments on the Original Diagram in an AHP Context:</h3>
            <ul>
                <li><strong>Level 1 (Goal):</strong> "Specialized Coffee" acted more as the topic domain rather than a specific decision-making goal (e.g., "Select the Best Coffee Offering").</li>
                <li><strong>Levels 2 & 3 (Brewing Methods):</strong> "Manual" (V60, French Press, Cold Brew, Tubruk) and "Mesin" (Mesin Espresso, Mesin Drip) were clear categories. These could be criteria or alternatives depending on the specific AHP goal.</li>
                <li><strong>Level 4 (Bean Origins):</strong> Beans like Aceh Gayo, Mandailing, Toraja, Flores Bajawa were linked to multiple brewing methods. In AHP, these would typically be "Alternatives" to be evaluated, or attributes influencing a choice.</li>
                <li><strong>Level 5 (Processing Methods):</strong> Washed, Dry, Honey processed were linked to "Flores Bajawa." In AHP, processing could be a sub-criterion for evaluating beans.</li>
                <li><strong>Key AHP Divergences:</strong>
                    <ul>
                        <li><strong>Lack of a clear decision being evaluated:</strong> AHP ranks alternatives against criteria.</li>
                        <li><strong>Multi-directional links:</strong> AHP typically has a top-down flow (Goal -> Criteria -> Sub-criteria -> Alternatives).</li>
                        <li><strong>Varied entity types per level:</strong> AHP levels usually represent evaluative factors leading to a choice among alternatives.</li>
                    </ul>
                </li>
            </ul>

            <h3>Revising for a Clearer AHP Structure:</h3>
            <p>To transform this into a standard AHP, we defined a specific business decision: <strong>A specialty coffee shop wants to introduce a new premium "Single Origin Feature" coffee offering.</strong> They need to decide which combination of bean and its ideal manual brewing method to highlight.</p>
            <p>The revised AHP structure is as follows (and visualized in the graph below):</p>
            <ul>
                <li><strong>Level 1: Goal</strong> - Select the Optimal New Single Origin Feature Offering.</li>
                <li><strong>Level 2: Criteria</strong> - Key factors for selection (e.g., Exceptional Flavor, Customer Appeal, Barista Skill, Sourcing Story).</li>
                <li><strong>Level 3: Sub-Criteria</strong> - Detailed aspects of each criterion (e.g., under Flavor: Clarity, Body, Aroma).</li>
                <li><strong>Level 4: Alternatives</strong> - The specific combinations being considered (e.g., "Aceh Gayo (Washed) via V60," "Flores Bajawa (Honey Processed) via Cold Brew").</li>
            </ul>
            <p>This revised structure allows for a systematic evaluation of defined alternatives against a consistent set of criteria and sub-criteria, which is the core of the AHP methodology.</p>
        </div>

        <div class="content-section">
            <h2>AHP Hierarchy Graph for Coffee Offering Selection</h2>
            <p>The following graph visualizes the revised 4-level AHP structure for selecting a new single origin coffee feature. This is a simplified network representation to show the hierarchy. In a full AHP, weights would be assigned at each level based on pairwise comparisons.</p>
            <div id="ahpGraph"></div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const ahpData = {
                nodes: [
                    // Level 1: Goal
                    { id: 'Goal', label: 'Select Optimal New Single<br>Origin Feature Offering', level: 1, group: 1, title: 'Goal' },

                    // Level 2: Criteria
                    { id: 'C1', label: 'Exceptional Flavor<br>& Quality', level: 2, group: 2, title: 'Criterion 1' },
                    { id: 'C2', label: 'Customer Appeal<br>& Uniqueness', level: 2, group: 2, title: 'Criterion 2' },
                    { id: 'C3', label: 'Barista Skill<br>& Consistency', level: 2, group: 2, title: 'Criterion 3' },
                    { id: 'C4', label: 'Sourcing Story<br>& Bean Characteristics', level: 2, group: 2, title: 'Criterion 4' },

                    // Level 3: Sub-Criteria for C1
                    { id: 'SC1.1', label: 'Clarity of Notes', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC1.2', label: 'Body & Mouthfeel', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC1.3', label: 'Aroma Intensity', level: 3, group: 3, title: 'Sub-Criterion' },
                    // Level 3: Sub-Criteria for C2
                    { id: 'SC2.1', label: 'Perceived Value', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC2.2', label: 'Instagrammability', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC2.3', label: 'Novelty Factor', level: 3, group: 3, title: 'Sub-Criterion' },
                    // Level 3: Sub-Criteria for C3
                    { id: 'SC3.1', label: 'Ease of Training', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC3.2', label: 'Reproducibility', level: 3, group: 3, title: 'Sub-Criterion' },
                    // Level 3: Sub-Criteria for C4
                    { id: 'SC4.1', label: 'Origin Reputation', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC4.2', label: 'Processing Impact', level: 3, group: 3, title: 'Sub-Criterion' },
                    { id: 'SC4.3', label: 'Ethical Story', level: 3, group: 3, title: 'Sub-Criterion' },


                    // Level 4: Alternatives
                    { id: 'A1', label: 'Aceh Gayo (Washed)<br>via V60', level: 4, group: 4, title: 'Alternative 1' },
                    { id: 'A2', label: 'Mandailing (Dry)<br>via French Press', level: 4, group: 4, title: 'Alternative 2' },
                    { id: 'A3', label: 'Toraja (Washed)<br>via V60', level: 4, group: 4, title: 'Alternative 3' },
                    { id: 'A4', label: 'Flores Bajawa (Honey)<br>via Cold Brew', level: 4, group: 4, title: 'Alternative 4' },
                    { id: 'A5', label: 'Aceh Gayo (Washed)<br>via Tubruk', level: 4, group: 4, title: 'Alternative 5' }
                ],
                links: [
                    // Goal to Criteria
                    { source: 'Goal', target: 'C1' }, { source: 'Goal', target: 'C2' }, { source: 'Goal', target: 'C3' }, { source: 'Goal', target: 'C4' },
                    // C1 to its Sub-Criteria
                    { source: 'C1', target: 'SC1.1' }, { source: 'C1', target: 'SC1.2' }, { source: 'C1', target: 'SC1.3' },
                    // C2 to its Sub-Criteria
                    { source: 'C2', target: 'SC2.1' }, { source: 'C2', target: 'SC2.2' }, { source: 'C2', target: 'SC2.3' },
                    // C3 to its Sub-Criteria
                    { source: 'C3', target: 'SC3.1' }, { source: 'C3', target: 'SC3.2' },
                    // C4 to its Sub-Criteria
                    { source: 'C4', target: 'SC4.1' }, { source: 'C4', target: 'SC4.2' }, { source: 'C4', target: 'SC4.3' },
                    // Sub-Criteria to Alternatives (Illustrative - connecting all for simplicity, in reality specific connections)
                    // Connecting all sub-criteria to all alternatives for visual representation of the layer.
                    // In practice, each alternative is evaluated against each sub-criterion.
                    'SC1.1', 'SC1.2', 'SC1.3', 'SC2.1', 'SC2.2', 'SC2.3', 'SC3.1', 'SC3.2', 'SC4.1', 'SC4.2', 'SC4.3'
                ].flatMap(sc => ['A1', 'A2', 'A3', 'A4', 'A5'].map(alt => ({ source: sc, target: alt })))
                 .concat([ // Adding goal to criteria links back as flatMap overwrote them
                    { source: 'Goal', target: 'C1' }, { source: 'Goal', target: 'C2' }, { source: 'Goal', target: 'C3' }, { source: 'Goal', target: 'C4' },
                    { source: 'C1', target: 'SC1.1' }, { source: 'C1', target: 'SC1.2' }, { source: 'C1', target: 'SC1.3' },
                    { source: 'C2', target: 'SC2.1' }, { source: 'C2', target: 'SC2.2' }, { source: 'C2', target: 'SC2.3' },
                    { source: 'C3', target: 'SC3.1' }, { source: 'C3', target: 'SC3.2' },
                    { source: 'C4', target: 'SC4.1' }, { source: 'C4', target: 'SC4.2' }, { source: 'C4', target: 'SC4.3' },
                 ])
            };

            const nodeMap = new Map(ahpData.nodes.map(node => [node.id, node]));

            // Assign x, y positions
            const levels = {};
            ahpData.nodes.forEach(node => {
                if (!levels[node.level]) levels[node.level] = [];
                levels[node.level].push(node);
            });

            const xSpacing = 250;
            const ySpacing = 120;
            let maxYUsed = 0;

            Object.keys(levels).sort((a,b) => a-b).forEach((levelKey, levelIndex) => {
                const nodesInLevel = levels[levelKey];
                const levelWidth = (nodesInLevel.length - 1) * ySpacing;
                let startY = -levelWidth / 2;
                if (levelKey == 1) startY = 0; // Center the goal
                if (levelKey == 4) startY -= ySpacing*1.5; // Adjust alternatives start

                nodesInLevel.forEach((node, nodeIndex) => {
                    node.x = levelIndex * xSpacing;
                    node.y = startY + nodeIndex * ySpacing;
                    if (node.y > maxYUsed) maxYUsed = node.y;
                });
            });


            const edgeShapes = [];
            ahpData.links.forEach(link => {
                const sourceNode = nodeMap.get(link.source);
                const targetNode = nodeMap.get(link.target);
                if (sourceNode && targetNode) {
                    edgeShapes.push({
                        type: 'line',
                        x0: sourceNode.x,
                        y0: sourceNode.y,
                        x1: targetNode.x,
                        y1: targetNode.y,
                        line: {
                            color: '#D7CCC8', // Light Brown/Beige for lines
                            width: 1.5
                        }
                    });
                }
            });

            const traceNodes = {
                x: ahpData.nodes.map(n => n.x),
                y: ahpData.nodes.map(n => n.y),
                text: ahpData.nodes.map(n => `<b>${n.label.replace(/<br>/g, '\n')}</b>`),
                mode: 'markers+text',
                type: 'scatter',
                marker: {
                    size: 20,
                    color: ahpData.nodes.map(n => {
                        if (n.level === 1) return '#4A148C'; // Dark Purple (Goal)
                        if (n.level === 2) return '#7B1FA2'; // Medium Purple (Criteria)
                        if (n.level === 3) return '#795548'; // Medium Brown (Sub-Criteria)
                        if (n.level === 4) return '#5D4037'; // Dark Brown (Alternatives)
                        return '#E1BEE7';
                    }),
                    symbol: ahpData.nodes.map(n => {
                        if (n.level === 1) return 'diamond';
                        if (n.level === 2) return 'square';
                        if (n.level === 3) return 'circle';
                        if (n.level === 4) return 'hexagon2';
                        return 'circle';
                    }),
                    line: {
                        width: 2,
                        color: '#424242' // Dark Grey border for markers
                    }
                },
                textfont: {
                    family: 'Segoe UI, Tahoma, sans-serif',
                    size: 10,
                    color: '#3E2723' // Darkest brown text for nodes
                },
                textposition: 'middle right',
                hoverinfo: 'text',
                hovertext: ahpData.nodes.map(n => `<b>${n.title}</b><br>${n.label.replace(/<br>/g, ' ')}`)
            };

            const layout = {
                title: {
                    text: 'AHP Hierarchy: Coffee Offering Selection',
                    font: {
                        size: 20,
                        color: '#4A148C' // Dark Purple
                    }
                },
                shapes: edgeShapes,
                xaxis: {
                    showgrid: false,
                    zeroline: false,
                    showticklabels: false,
                    range: [-xSpacing*0.5, xSpacing * 3.5] // Adjusted range
                },
                yaxis: {
                    showgrid: false,
                    zeroline: false,
                    showticklabels: false,
                    range: [-maxYUsed - ySpacing, maxYUsed + ySpacing] // Adjusted range
                },
                showlegend: false,
                hovermode: 'closest',
                paper_bgcolor: '#FFFFFF', // Background of the plotting area
                plot_bgcolor: '#FFFFFF',  // Background of the graph itself
                margin: { t: 80, b: 40, l: 40, r: 40 },
                height: 800 // Increased height for better spacing
            };

            Plotly.newPlot('ahpGraph', [traceNodes], layout);

            // Small fix for link generation - ensure only unique links for goal to criteria etc.
            // The flatMap approach for alternatives is good, but we need to preserve the earlier defined links.
            // The .concat method used in the data structure above is a better way.
            // The current link generation for Sub-Criteria to Alternatives is illustrative, showing layer connection.
            // A true AHP evaluation would have individual weightings.
        });
    </script>
</body>
</html>
